!(import! &self ../perception-updater)
!(bind! &cacheTest (new-space))
!(bind! &perceptaTest (new-space))
!(bind! &envSpaceTest (new-space))

!(add-atom &envSpaceTest (a b c d))
!(test (fetchMaxCycle &perceptaTest) 0)
!(test (changeToPercepta ((State car) (State Tree) (State house)) 3) ((perception 3 (State car)) (perception 3 (State Tree)) (perception 3 (State house))))
; !(add-reduct &cacheTest (superpose ((a b c) (d e f) (g h i))))
!(add-atom &cacheTest (a b c))
!(add-atom &cacheTest (d e f))
!(add-atom &cacheTest (g h i))

!(perceptionUpdater &cacheTest &perceptaTest 3)
!(test (collapse (get-atoms &perceptaTest)) ((perception 1 (a b c)) (perception 1 (d e f)) (perception 1 (g h i))))
!(test (collapse (get-atoms &cacheTest)) ())
!(test (fetchMaxCycle &perceptaTest) 1)
; !(add-reduct &cacheTest (superpose ((a b x) (d e h) (g h r))))
!(add-atom &cacheTest (a b x))
!(add-atom &cacheTest (d e h))
!(add-atom &cacheTest (g h r))

!(perceptionUpdater &cacheTest &perceptaTest 3)
!(get-atoms &perceptaTest)
!(test (fetchMaxCycle &perceptaTest) 2)